{% extends 'website_part/base.html' %}
{% load static %}

{% block titre %}
Besoins en cours | MainDansLaMain
{% endblock titre %}


{% block main %}
<!-- main -->
<main>
    <!-- titre de la page -->
    <section class="page-section-title section-title">
        <div class="container text-center">
            <div class="row">
                <h2 class="display-3 fw-bold text-uppercase">Les besoins en cours</h2>
            </div>
        </div>
    </section>

    <!-- Form -->
    <section class="form py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-11 col-md-9">
                    <p class="mb-5">
                        Veuillez remplir le formulaire ci-dessous pour nous aider à mieux comprendre votre
                        situation et à vous fournir une assistance appropriée.
                    </p>
                    <h2 class="mb-4 display-5 fw-bold">Détails du besoin</h2>
                    <!-- trait -->
                    <hr class="mb-5">
                </div>
            </div>
        </div>

        {% if messages %}
        <div class="messages col-md-4">
            {% for message in messages %}
            <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <div class="container">
            <div class="row justify-content-center">
                <div class="col-11 col-md-9">
                    {% if tous_les_besoins %}
                    <div class="row">
                        {% for besoin in tous_les_besoins %}
                        <div class="col-md-12">
                            <div class="card mb-4">
                                {% if besoin.image %}
                                <img src="{{ besoin.image.url }}" class="card-img-top" alt="{{ besoin.titre }}"
                                    width="200" height="500">
                                {% else %}
                                <img src="{% static 'website_part/img/team-hands.jpg' %}" class="card-img-top"
                                    alt="{{ besoin.titre }}" width="200" height="500">
                                {% endif %}
                                <div class="card-body">
                                    <h5 class="card-title">{{ besoin.titre }}</h5>
                                    <!-- Limiter la description -->
                                    <p class="card-text description">{{ besoin.description }}</p>
                                    <!-- Bouton Lire la suite -->
                                    <a href="#" class="btn btn-primary lire-suite">Lire la suite</a>
                                    <!-- Bouton Soutenir -->
                                    <a href="{% url 'donations:faire_donation_materielle' besoin.id %}"
                                        class="btn btn-primary mt-3">Soutenir</a>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <p class="mt-4">Aucun besoin en cours pour le moment.</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
</main>
{% endblock main %}